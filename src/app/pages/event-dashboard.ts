import { Component, OnInit } from "@angular/core";
import { CommonModule } from "@angular/common";
import { Router, ActivatedRoute, NavigationEnd } from "@angular/router";
import { filter } from "rxjs/operators";
import {
  EventDetailSidebarComponent,
  MenuItem,
} from "../components/event-detail-sidebar";

interface ProgressStep {
  label: string;
  completed: boolean;
}

const DASHBOARD_ICON = `<svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg"><path opacity="0.4" fill-rule="evenodd" clip-rule="evenodd" d="M9.11972 1.77151C8.15614 1.4095 7.09392 1.4095 6.13033 1.77151C5.5251 1.99889 4.94006 2.45532 3.51022 3.59919L1.21855 5.43253C0.895102 5.69128 0.423133 5.63884 0.164376 5.3154C-0.0943811 4.99195 -0.0419401 4.51998 0.281506 4.26122L2.57317 2.42789C2.61283 2.39616 2.65202 2.36481 2.69075 2.33381C3.96492 1.31414 4.74565 0.689359 5.6028 0.367335C6.90647 -0.122445 8.34359 -0.122445 9.64726 0.367335C10.5044 0.689359 11.2851 1.31414 12.5593 2.33381C12.598 2.3648 12.6372 2.39616 12.6769 2.42789L14.9685 4.26122C15.292 4.51998 15.3444 4.99195 15.0857 5.3154C14.8269 5.63884 14.355 5.69128 14.0315 5.43253L11.7398 3.59919C10.31 2.45532 9.72496 1.99889 9.11972 1.77151Z" fill="white"/><path fill-rule="evenodd" clip-rule="evenodd" d="M4.08565 0.281506C4.34441 0.604953 4.29197 1.07692 3.96852 1.33568L3.51019 1.70235C3.09253 2.03647 2.92421 2.17224 2.77968 2.31347C2.06537 3.01148 1.61969 3.93876 1.52086 4.93259C1.50087 5.13368 1.5 5.34993 1.5 5.88479V11.2C1.5 13.3171 3.21624 15.0334 5.33334 15.0334C5.93164 15.0334 6.41667 14.5483 6.41667 13.95V10.2833C6.41667 8.35031 7.98367 6.78331 9.91667 6.78331C11.8497 6.78331 13.4167 8.35031 13.4167 10.2833V13.95C13.4167 14.5483 13.9017 15.0334 14.5 15.0334C16.6171 15.0334 18.3333 13.3171 18.3333 11.2V5.88479C18.3333 5.34993 18.3325 5.13368 18.3125 4.93259C18.2136 3.93876 17.768 3.01148 17.0537 2.31347C16.9091 2.17224 16.7408 2.03647 16.3231 1.70235L15.8648 1.33568C15.5414 1.07692 15.4889 0.604953 15.7477 0.281506C16.0064 -0.0419401 16.4784 -0.0943811 16.8019 0.164376L17.2602 0.531043L17.2933 0.557499C17.6677 0.856998 17.8977 1.04103 18.102 1.24064C19.0684 2.18501 19.6714 3.43957 19.8051 4.78416C19.8334 5.06834 19.8334 5.36294 19.8333 5.84235V5.88479V11.2C19.8333 14.1456 17.4455 16.5334 14.5 16.5334C13.0733 16.5334 11.9167 15.3768 11.9167 13.95V10.2833C11.9167 9.17874 11.0212 8.28331 9.91667 8.28331C8.8121 8.28331 7.91667 9.17873 7.91667 10.2833V13.95C7.91667 15.3768 6.76007 16.5334 5.33334 16.5334C2.38782 16.5334 0 14.1455 0 11.2V5.88479L0 5.84239C-2.21527e-05 5.36296 -3.65771e-05 5.06835 0.0282241 4.78416C0.161934 3.43957 0.764905 2.18501 1.73133 1.24064C1.93559 1.04104 2.16565 0.857011 2.54004 0.557531C2.55095 0.548801 2.56186 0.540126 2.57317 0.531395C3.91753 1.35249 4.7196 0.699036 5.60266 0.367188Z" fill="white"/></svg>`;

const EVENT_SETUP_ICON = `<svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg"><path opacity="0.4" fill-rule="evenodd" clip-rule="evenodd" d="M0.750001 0C0.335787 -5.96046e-08 8.19241e-07 0.335786 7.59636e-07 0.75C7.00032e-07 1.16421 0.335787 1.5 0.750001 1.5L8.08333 1.5C8.49755 1.5 8.83333 1.16421 8.83333 0.750001C8.83333 0.335787 8.49755 7.15256e-07 8.08333 7.15256e-07L0.750001 0ZM3.95 4.58333L3.91957 4.58333H3.91956C3.38541 4.58332 2.93956 4.58331 2.57533 4.61307C2.19545 4.64411 1.83879 4.71122 1.50153 4.88307C0.984081 5.14672 0.563385 5.56741 0.299733 6.08486C0.127889 6.42212 0.0607778 6.77878 0.02974 7.15866C-1.90887e-05 7.5229 -1.02672e-05 7.96874 4.02008e-07 8.5029L7.59636e-07 8.53333V13.125C7.59636e-07 13.5392 0.335787 13.875 0.750001 13.875C1.16421 13.875 1.5 13.5392 1.5 13.125V8.53333C1.5 7.9609 1.50058 7.57669 1.52476 7.28081C1.54822 6.99369 1.5901 6.85641 1.63624 6.76585C1.75608 6.53064 1.94731 6.33942 2.18251 6.21958C2.27307 6.17343 2.41036 6.13155 2.69748 6.10809C2.99336 6.08392 3.37757 6.08333 3.95 6.08333H4.88333C5.45576 6.08333 5.83998 6.08392 6.13586 6.10809C6.42298 6.13155 6.56026 6.17343 6.65082 6.21958C6.88602 6.33942 7.07725 6.53064 7.19709 6.76585C7.24324 6.85641 7.28512 6.99369 7.30858 7.28081C7.33275 7.57669 7.33333 7.96091 7.33333 8.53333V13.125C7.33333 13.5392 7.66912 13.875 8.08333 13.875C8.49755 13.875 8.83333 13.5392 8.83333 13.125V8.53333V8.50293C8.83335 7.96876 8.83335 7.5229 8.80359 7.15866C8.77256 6.77878 8.70545 6.42212 8.5336 6.08486C8.26995 5.56741 7.84925 5.14672 7.33181 4.88307C6.99455 4.71122 6.63789 4.64411 6.258 4.61307C5.89377 4.58331 5.44792 4.58332 4.9...Z" fill="white"/></svg>`;

const EVENT_OVERVIEW_ICON = `<svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg"><path opacity="0.4" fill-rule="evenodd" clip-rule="evenodd" d="M0.750001 0C0.335787 -5.96046e-08 8.19241e-07 0.335786 7.59636e-07 0.75C7.00032e-07 1.16421 0.335787 1.5 0.750001 1.5L8.08333 1.5C8.49755 1.5 8.83333 1.16421 8.83333 0.750001C8.83333 0.335787 8.49755 7.15256e-07 8.08333 7.15256e-07L0.750001 0ZM3.95 4.58333L3.91957 4.58333H3.91956C3.38541 4.58332 2.93956 4.58331 2.57533 4.61307C2.19545 4.64411 1.83879 4.71122 1.50153 4.88307C0.984081 5.14672 0.563385 5.56741 0.299733 6.08486C0.127889 6.42212 0.0607778 6.77878 0.02974 7.15866C-1.90887e-05 7.5229 -1.02672e-05 7.96874 4.02008e-07 8.5029L7.59636e-07 8.53333V13.125C7.59636e-07 13.5392 0.335787 13.875 0.750001 13.875C1.16421 13.875 1.5 13.5392 1.5 13.125V8.53333C1.5 7.9609 1.50058 7.57669 1.52476 7.28081C1.54822 6.99369 1.5901 6.85641 1.63624 6.76585C1.75608 6.53064 1.94731 6.33942 2.18251 6.21958C2.27307 6.17343 2.41036 6.13155 2.69748 6.10809C2.99336 6.08392 3.37757 6.08333 3.95 6.08333H4.88333C5.45576 6.08333 5.83998 6.08392 6.13586 6.10809C6.42298 6.13155 6.56026 6.17343 6.65082 6.21958C6.88602 6.33942 7.07725 6.53064 7.19709 6.76585C7.24324 6.85641 7.28512 6.99369 7.30858 7.28081C7.33275 7.57669 7.33333 7.96091 7.33333 8.53333V13.125C7.33333 13.5392 7.66912 13.875 8.08333 13.875C8.49755 13.875 8.83333 13.5392 8.83333 13.125V8.53333V8.50293C8.83335 7.96876 8.83335 7.5229 8.80359 7.15866C8.77256 6.77878 8.70545 6.42212 8.5336 6.08486C8.26995 5.56741 7.84925 5.14672 7.33181 4.88307C6.99455 4.71122 6.63789 4.64411 6.258 4.61307C5.89377 4.58331 5.44792 4.58332 4.9...Z" fill="white"/></svg>`;

const NOTIFICATION_ICON = `<svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg"><path opacity="0.4" fill-rule="evenodd" clip-rule="evenodd" d="M0.750001 0C0.335787 -5.96046e-08 8.19241e-07 0.335786 7.59636e-07 0.75C7.00032e-07 1.16421 0.335787 1.5 0.750001 1.5L8.08333 1.5C8.49755 1.5 8.83333 1.16421 8.83333 0.750001C8.83333 0.335787 8.49755 7.15256e-07 8.08333 7.15256e-07L0.750001 0ZM3.95 4.58333L3.91957 4.58333H3.91956C3.38541 4.58332 2.93956 4.58331 2.57533 4.61307C2.19545 4.64411 1.83879 4.71122 1.50153 4.88307C0.984081 5.14672 0.563385 5.56741 0.299733 6.08486C0.127889 6.42212 0.0607778 6.77878 0.02974 7.15866C-1.90887e-05 7.5229 -1.02672e-05 7.96874 4.02008e-07 8.5029L7.59636e-07 8.53333V13.125C7.59636e-07 13.5392 0.335787 13.875 0.750001 13.875C1.16421 13.875 1.5 13.5392 1.5 13.125V8.53333C1.5 7.9609 1.50058 7.57669 1.52476 7.28081C1.54822 6.99369 1.5901 6.85641 1.63624 6.76585C1.75608 6.53064 1.94731 6.33942 2.18251 6.21958C2.27307 6.17343 2.41036 6.13155 2.69748 6.10809C2.99336 6.08392 3.37757 6.08333 3.95 6.08333H4.88333C5.45576 6.08333 5.83998 6.08392 6.13586 6.10809C6.42298 6.13155 6.56026 6.17343 6.65082 6.21958C6.88602 6.33942 7.07725 6.53064 7.19709 6.76585C7.24324 6.85641 7.28512 6.99369 7.30858 7.28081C7.33275 7.57669 7.33333 7.96091 7.33333 8.53333V13.125C7.33333 13.5392 7.66912 13.875 8.08333 13.875C8.49755 13.875 8.83333 13.5392 8.83333 13.125V8.53333V8.50293C8.83335 7.96876 8.83335 7.5229 8.80359 7.15866C8.77256 6.77878 8.70545 6.42212 8.5336 6.08486C8.26995 5.56741 7.84925 5.14672 7.33181 4.88307C6.99455 4.71122 6.63789 4.64411 6.258 4.61307C5.89377 4.58331 5.44792 4.58332 4.9...Z" fill="white"/></svg>`;

const USER_PROFILE_ICON = `<svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg"><path opacity="0.4" fill-rule="evenodd" clip-rule="evenodd" d="M0.750001 0C0.335787 -5.96046e-08 8.19241e-07 0.335786 7.59636e-07 0.75C7.00032e-07 1.16421 0.335787 1.5 0.750001 1.5L8.08333 1.5C8.49755 1.5 8.83333 1.16421 8.83333 0.750001C8.83333 0.335787 8.49755 7.15256e-07 8.08333 7.15256e-07L0.750001 0ZM3.95 4.58333L3.91957 4.58333H3.91956C3.38541 4.58332 2.93956 4.58331 2.57533 4.61307C2.19545 4.64411 1.83879 4.71122 1.50153 4.88307C0.984081 5.14672 0.563385 5.56741 0.299733 6.08486C0.127889 6.42212 0.0607778 6.77878 0.02974 7.15866C-1.90887e-05 7.5229 -1.02672e-05 7.96874 4.02008e-07 8.5029L7.59636e-07 8.53333V13.125C7.59636e-07 13.5392 0.335787 13.875 0.750001 13.875C1.16421 13.875 1.5 13.5392 1.5 13.125V8.53333C1.5 7.9609 1.50058 7.57669 1.52476 7.28081C1.54822 6.99369 1.5901 6.85641 1.63624 6.76585C1.75608 6.53064 1.94731 6.33942 2.18251 6.21958C2.27307 6.17343 2.41036 6.13155 2.69748 6.10809C2.99336 6.08392 3.37757 6.08333 3.95 6.08333H4.88333C5.45576 6.08333 5.83998 6.08392 6.13586 6.10809C6.42298 6.13155 6.56026 6.17343 6.65082 6.21958C6.88602 6.33942 7.07725 6.53064 7.19709 6.76585C7.24324 6.85641 7.28512 6.99369 7.30858 7.28081C7.33275 7.57669 7.33333 7.96091 7.33333 8.53333V13.125C7.33333 13.5392 7.66912 13.875 8.08333 13.875C8.49755 13.875 8.83333 13.5392 8.83333 13.125V8.53333V8.50293C8.83335 7.96876 8.83335 7.5229 8.80359 7.15866C8.77256 6.77878 8.70545 6.42212 8.5336 6.08486C8.26995 5.56741 7.84925 5.14672 7.33181 4.88307C6.99455 4.71122 6.63789 4.64411 6.258 4.61307C5.89377 4.58331 5.44792 4.58332 4.9...Z" fill="white"/></svg>`;

const ANALYTICS_ICON = `<svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg"><path opacity="0.4" fill-rule="evenodd" clip-rule="evenodd" d="M0.750001 0C0.335787 -5.96046e-08 8.19241e-07 0.335786 7.59636e-07 0.75C7.00032e-07 1.16421 0.335787 1.5 0.750001 1.5L8.08333 1.5C8.49755 1.5 8.83333 1.16421 8.83333 0.750001C8.83333 0.335787 8.49755 7.15256e-07 8.08333 7.15256e-07L0.750001 0ZM3.95 4.58333L3.91957 4.58333H3.91956C3.38541 4.58332 2.93956 4.58331 2.57533 4.61307C2.19545 4.64411 1.83879 4.71122 1.50153 4.88307C0.984081 5.14672 0.563385 5.56741 0.299733 6.08486C0.127889 6.42212 0.0607778 6.77878 0.02974 7.15866C-1.90887e-05 7.5229 -1.02672e-05 7.96874 4.02008e-07 8.5029L7.59636e-07 8.53333V13.125C7.59636e-07 13.5392 0.335787 13.875 0.750001 13.875C1.16421 13.875 1.5 13.5392 1.5 13.125V8.53333C1.5 7.9609 1.50058 7.57669 1.52476 7.28081C1.54822 6.99369 1.5901 6.85641 1.63624 6.76585C1.75608 6.53064 1.94731 6.33942 2.18251 6.21958C2.27307 6.17343 2.41036 6.13155 2.69748 6.10809C2.99336 6.08392 3.37757 6.08333 3.95 6.08333H4.88333C5.45576 6.08333 5.83998 6.08392 6.13586 6.10809C6.42298 6.13155 6.56026 6.17343 6.65082 6.21958C6.88602 6.33942 7.07725 6.53064 7.19709 6.76585C7.24324 6.85641 7.28512 6.99369 7.30858 7.28081C7.33275 7.57669 7.33333 7.96091 7.33333 8.53333V13.125C7.33333 13.5392 7.66912 13.875 8.08333 13.875C8.49755 13.875 8.83333 13.5392 8.83333 13.125V8.53333V8.50293C8.83335 7.96876 8.83335 7.5229 8.80359 7.15866C8.77256 6.77878 8.70545 6.42212 8.5336 6.08486C8.26995 5.56741 7.84925 5.14672 7.33181 4.88307C6.99455 4.71122 6.63789 4.64411 6.258 4.61307C5.89377 4.58331 5.44792 4.58332 4.9...Z" fill="white"/></svg>`;

const THEME_ICON = `<svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg"><path opacity="0.4" fill-rule="evenodd" clip-rule="evenodd" d="M0.750001 0C0.335787 -5.96046e-08 8.19241e-07 0.335786 7.59636e-07 0.75C7.00032e-07 1.16421 0.335787 1.5 0.750001 1.5L8.08333 1.5C8.49755 1.5 8.83333 1.16421 8.83333 0.750001C8.83333 0.335787 8.49755 7.15256e-07 8.08333 7.15256e-07L0.750001 0ZM3.95 4.58333L3.91957 4.58333H3.91956C3.38541 4.58332 2.93956 4.58331 2.57533 4.61307C2.19545 4.64411 1.83879 4.71122 1.50153 4.88307C0.984081 5.14672 0.563385 5.56741 0.299733 6.08486C0.127889 6.42212 0.0607778 6.77878 0.02974 7.15866C-1.90887e-05 7.5229 -1.02672e-05 7.96874 4.02008e-07 8.5029L7.59636e-07 8.53333V13.125C7.59636e-07 13.5392 0.335787 13.875 0.750001 13.875C1.16421 13.875 1.5 13.5392 1.5 13.125V8.53333C1.5 7.9609 1.50058 7.57669 1.52476 7.28081C1.54822 6.99369 1.5901 6.85641 1.63624 6.76585C1.75608 6.53064 1.94731 6.33942 2.18251 6.21958C2.27307 6.17343 2.41036 6.13155 2.69748 6.10809C2.99336 6.08392 3.37757 6.08333 3.95 6.08333H4.88333C5.45576 6.08333 5.83998 6.08392 6.13586 6.10809C6.42298 6.13155 6.56026 6.17343 6.65082 6.21958C6.88602 6.33942 7.07725 6.53064 7.19709 6.76585C7.24324 6.85641 7.28512 6.99369 7.30858 7.28081C7.33275 7.57669 7.33333 7.96091 7.33333 8.53333V13.125C7.33333 13.5392 7.66912 13.875 8.08333 13.875C8.49755 13.875 8.83333 13.5392 8.83333 13.125V8.53333V8.50293C8.83335 7.96876 8.83335 7.5229 8.80359 7.15866C8.77256 6.77878 8.70545 6.42212 8.5336 6.08486C8.26995 5.56741 7.84925 5.14672 7.33181 4.88307C6.99455 4.71122 6.63789 4.64411 6.258 4.61307C5.89377 4.58331 5.44792 4.58332 4.9...Z" fill="white"/></svg>`;

@Component({
  selector: "app-event-dashboard",
  standalone: true,
  imports: [CommonModule, EventDetailSidebarComponent],
  template: `
    <div class="flex h-screen overflow-hidden bg-main-bg">
      <!-- Event Detail Sidebar Component -->
      <app-event-detail-sidebar
        [menuItems]="menuItems"
        [activeRoute]="activeRoute"
        [backButtonLabel]="backButtonLabel"
        (logoutEvent)="onLogout()"
        (backEvent)="onBackToDashboard()"
      ></app-event-detail-sidebar>

      <!-- Main Content -->
      <main class="flex-1 flex flex-col overflow-hidden">
        <!-- Header -->
        <header class="h-24 bg-white border-b border-[#ECECEC] px-4 lg:px-8">
          <div class="h-full flex items-center gap-4">
            <!-- Menu Toggle -->
            <button
              class="w-11 h-11 bg-primary-blue rounded flex items-center justify-center lg:hidden hover:bg-[#0385b5] transition-colors"
            >
              <svg
                width="36"
                height="36"
                viewBox="0 0 36 36"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M4.5 9C4.5 8.17158 5.17158 7.5 6 7.5H30C30.8284 7.5 31.5 8.17158 31.5 9C31.5 9.82842 30.8284 10.5 30 10.5H6C5.17158 10.5 4.5 9.82842 4.5 9ZM4.5 18C4.5 17.1716 5.17158 16.5 6 16.5H21C21.8284 16.5 22.5 17.1716 22.5 18C22.5 18.8285 21.8284 19.5 21 19.5H6C5.17158 19.5 4.5 18.8285 4.5 18ZM4.5 27C4.5 26.1716 5.17158 25.5 6 25.5H13.5C14.3284 25.5 15 26.1716 15 27C15 27.8285 14.3284 28.5 13.5 28.5H6C5.17158 28.5 4.5 27.8285 4.5 27Z"
                  fill="white"
                />
              </svg>
            </button>

            <!-- Event Info -->
            <div
              class="flex-1 flex flex-col lg:flex-row lg:items-center gap-2 lg:gap-6"
            >
              <div class="flex items-center gap-3 lg:gap-4">
                <div
                  class="w-11 h-11 bg-[#E8F4F8] rounded flex items-center justify-center flex-shrink-0"
                >
                  <svg
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <rect
                      x="3"
                      y="5"
                      width="18"
                      height="15"
                      rx="2"
                      stroke="#009FD8"
                      stroke-width="2"
                    />
                    <path
                      d="M3 8H21"
                      stroke="#009FD8"
                      stroke-width="2"
                      stroke-linecap="round"
                    />
                    <path
                      d="M8 3V7"
                      stroke="#009FD8"
                      stroke-width="2"
                      stroke-linecap="round"
                    />
                    <path
                      d="M16 3V7"
                      stroke="#009FD8"
                      stroke-width="2"
                      stroke-linecap="round"
                    />
                  </svg>
                </div>
                <div class="flex flex-col">
                  <h1
                    class="text-lg lg:text-[22px] font-bold text-[#181C32] tracking-wide"
                  >
                    {{ eventName }}
                  </h1>
                  <p
                    class="text-sm lg:text-base text-[#707070] tracking-wide font-medium"
                  >
                    {{ eventDates }}
                  </p>
                </div>
              </div>

              <!-- Header Actions -->
              <div class="flex items-center gap-3 ml-auto">
                <button
                  class="h-9 px-5 bg-[#DEE1EB] hover:bg-[#CED3E0] rounded text-[#4C546C] font-semibold text-sm lg:text-base flex items-center gap-2 transition-colors"
                >
                  <svg
                    width="18"
                    height="18"
                    viewBox="0 0 18 18"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <g clip-path="url(#clip0)">
                      <path
                        d="M3.43013 17.25H5.47256C5.79338 17.25 6.05363 17.0083 6.05363 16.6875C6.05363 16.3667 5.79356 16.125 5.47256 16.125H3.43013C2.57025 16.125 1.875 15.3619 1.875 14.4692V6.1875H15.9375V8.30288C15.9375 8.62369 16.2729 8.88394 16.5938 8.88394C16.9146 8.88394 17.25 8.62388 17.25 8.30288V3.54262C17.25 2.02894 15.8274 0.75 14.3299 0.75H3.43013C1.92956 0.75 0.75 2.00269 0.75 3.54262V14.4692C0.75 16.0026 1.92956 17.25 3.43013 17.25ZM1.875 3.54262C1.875 2.65875 2.58488 1.875 3.43013 1.875H14.3299C15.1974 1.875 15.9375 2.65875 15.9375 3.54262V5.0625H1.875V3.54262Z"
                        fill="#4C546C"
                      />
                      <path
                        d="M11.4369 8.83777C8.88919 8.83777 6.5625 10.4377 5.625 12.8191C5.625 12.8191 6.84469 17.3105 11.4369 17.2126C16.2891 17.1093 17.25 12.8191 17.25 12.8191C16.3125 10.4377 13.9854 8.83777 11.4369 8.83777ZM11.4784 16.0507C9.4845 16.0507 7.6635 14.8438 6.87787 13.0252C7.66331 11.2066 9.4845 9.99971 11.4784 9.99971C13.4728 9.99971 15.2942 11.2066 16.0798 13.0252C15.2944 14.8438 13.4728 16.0507 11.4784 16.0507Z"
                        fill="#4C546C"
                      />
                      <path
                        d="M11.4789 10.771C10.2357 10.771 9.22437 11.7822 9.22437 13.0253C9.22437 14.2684 10.2357 15.2796 11.4789 15.2796C12.722 15.2796 13.7332 14.2684 13.7332 13.0253C13.7332 11.7822 12.722 10.771 11.4789 10.771Z"
                        fill="#4C546C"
                      />
                    </g>
                    <defs>
                      <clipPath id="clip0">
                        <rect width="18" height="18" fill="white" />
                      </clipPath>
                    </defs>
                  </svg>
                  <span class="hidden sm:inline">Preview Event</span>
                </button>

                <button
                  class="h-9 px-5 bg-primary-blue hover:bg-[#0385b5] rounded text-white font-semibold text-sm lg:text-base flex items-center gap-2 transition-colors"
                >
                  <svg
                    width="18"
                    height="18"
                    viewBox="0 0 18 18"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M9 16.125C8.55 16.125 8.25 15.825 8.25 15.375V8.625C8.25 8.175 8.55 7.875 9 7.875C9.45 7.875 9.75 8.175 9.75 8.625V15.375C9.75 15.825 9.375 16.125 9 16.125Z"
                      fill="white"
                    />
                    <path
                      d="M15.1501 13.6501C14.9251 13.6501 14.7001 13.5751 14.5501 13.3501C14.3251 12.9751 14.4001 12.5251 14.7001 12.3001C15.6751 11.6251 16.0501 10.4251 15.7501 9.30006C15.4501 8.25006 14.4001 7.57506 13.1251 7.57506H12.2251C11.8501 7.57506 11.5501 7.35006 11.4751 6.97506C10.9501 5.10006 9.37512 3.67506 7.42512 3.45006C5.47512 3.15006 3.52512 4.20006 2.62512 5.92506C1.72512 7.65006 1.95012 9.82506 3.30012 11.3251C3.60012 11.6251 3.52512 12.0751 3.22512 12.3751C2.92512 12.6751 2.47512 12.6001 2.17512 12.3001C0.450118 10.3501 0.150118 7.57506 1.35012 5.25006C2.55012 2.92506 5.10012 1.65006 7.65012 1.95006C9.97512 2.17506 12.0001 3.82506 12.8251 6.00006H13.1251C15.0751 6.00006 16.6501 7.05006 17.1751 8.77506C17.7001 10.5001 17.1001 12.4501 15.6001 13.5001C15.4501 13.5751 15.3001 13.6501 15.1501 13.6501Z"
                      fill="white"
                    />
                    <path
                      d="M6.6001 11.1001C6.3751 11.1001 6.2251 11.0251 6.0751 10.8751C5.7751 10.5751 5.7751 10.1251 6.0751 9.82507L8.4751 7.42507C8.7751 7.12507 9.2251 7.12507 9.5251 7.42507L11.9251 9.82507C12.2251 10.1251 12.2251 10.5751 11.9251 10.8751C11.6251 11.1751 11.1751 11.1751 10.8751 10.8751L9.0001 9.00007L7.1251 10.8751C6.9751 11.0251 6.7501 11.1001 6.6001 11.1001Z"
                      fill="white"
                    />
                  </svg>
                  <span class="hidden sm:inline">Publish</span>
                </button>
              </div>
            </div>
          </div>
        </header>

        <!-- Content Area -->
        <div class="flex-1 overflow-auto">
          <!-- Status Section -->
          <div class="px-4 lg:px-8 py-8">
            <div
              class="max-w-[1366px] mx-auto grid grid-cols-1 lg:grid-cols-2 gap-6"
            >
              <!-- Left Column - Ready to Publish -->
              <div
                class="bg-white rounded shadow-md border border-[#E9E9E9] p-6 lg:p-8"
              >
                <h2
                  class="text-xl lg:text-[22px] font-semibold text-[#181C32] mb-4"
                >
                  Your event is almost ready to publish!
                </h2>
                <p
                  class="text-base lg:text-lg text-[#686868] font-medium leading-relaxed mb-8"
                >
                  Below are some other things you might want to add to your
                  event, or preview your event to see how it looks
                </p>

                <!-- Progress Steps -->
                <div class="flex flex-wrap gap-4 lg:gap-6 mb-8">
                  <div
                    *ngFor="let step of progressSteps"
                    class="flex items-center gap-2"
                  >
                    <svg
                      width="20"
                      height="20"
                      viewBox="0 0 20 20"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <g clip-path="url(#clip0)">
                        <path
                          d="M10 0C4.48578 0 0 4.48578 0 10C0 15.5142 4.48578 20 10 20C15.5142 20 20 15.5142 20 10C20 4.48578 15.5142 0 10 0Z"
                          [attr.fill]="step.completed ? '#2E8C02' : '#B1B1B1'"
                        />
                        <path
                          d="M15.0684 7.88086L9.65164 13.2974C9.48914 13.4599 9.27582 13.5417 9.0625 13.5417C8.84918 13.5417 8.63586 13.4599 8.47336 13.2974L5.76508 10.5891C5.43915 10.2634 5.43915 9.73663 5.76508 9.41086C6.09085 9.08493 6.61743 9.08493 6.94336 9.41086L9.0625 11.53L13.8901 6.70258C14.2159 6.37665 14.7424 6.37665 15.0684 6.70258C15.3941 7.02835 15.3941 7.55493 15.0684 7.88086Z"
                          fill="#FAFAFA"
                        />
                      </g>
                      <defs>
                        <clipPath id="clip0">
                          <rect width="20" height="20" fill="white" />
                        </clipPath>
                      </defs>
                    </svg>
                    <span
                      class="text-sm lg:text-base font-semibold"
                      [class.text-[#2E8C02]]="step.completed"
                      [class.text-[#B1B1B1]]="!step.completed"
                    >
                      {{ step.label }}
                    </span>
                  </div>
                </div>

                <!-- Action Buttons -->
                <div class="flex flex-col sm:flex-row gap-3">
                  <button
                    class="h-9 px-5 bg-primary-blue hover:bg-[#0385b5] rounded text-white font-semibold text-base flex items-center justify-center gap-2 transition-colors"
                  >
                    <svg
                      width="18"
                      height="18"
                      viewBox="0 0 18 18"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <g clip-path="url(#clip0_preview)">
                        <path
                          d="M3.43013 17.25H5.47256C5.79338 17.25 6.05363 17.0083 6.05363 16.6875C6.05363 16.3667 5.79356 16.125 5.47256 16.125H3.43013C2.57025 16.125 1.875 15.3619 1.875 14.4692V6.1875H15.9375V8.30288C15.9375 8.62369 16.2729 8.88394 16.5938 8.88394C16.9146 8.88394 17.25 8.62388 17.25 8.30288V3.54262C17.25 2.02894 15.8274 0.75 14.3299 0.75H3.43013C1.92956 0.75 0.75 2.00269 0.75 3.54262V14.4692C0.75 16.0026 1.92956 17.25 3.43013 17.25ZM1.875 3.54262C1.875 2.65875 2.58488 1.875 3.43013 1.875H14.3299C15.1974 1.875 15.9375 2.65875 15.9375 3.54262V5.0625H1.875V3.54262Z"
                          fill="white"
                        />
                        <path
                          d="M11.4369 8.83777C8.88919 8.83777 6.5625 10.4377 5.625 12.8191C5.625 12.8191 6.84469 17.3105 11.4369 17.2126C16.2891 17.1093 17.25 12.8191 17.25 12.8191C16.3125 10.4377 13.9854 8.83777 11.4369 8.83777ZM11.4784 16.0507C9.4845 16.0507 7.6635 14.8438 6.87787 13.0252C7.66331 11.2066 9.4845 9.99971 11.4784 9.99971C13.4728 9.99971 15.2942 11.2066 16.0798 13.0252C15.2944 14.8438 13.4728 16.0507 11.4784 16.0507Z"
                          fill="white"
                        />
                        <path
                          d="M11.479 10.771C10.2359 10.771 9.22449 11.7822 9.22449 13.0253C9.22449 14.2684 10.2359 15.2796 11.479 15.2796C12.7221 15.2796 13.7333 14.2684 13.7333 13.0253C13.7333 11.7822 12.7221 10.771 11.479 10.771Z"
                          fill="white"
                        />
                      </g>
                      <defs>
                        <clipPath id="clip0_preview">
                          <rect width="18" height="18" fill="white" />
                        </clipPath>
                      </defs>
                    </svg>
                    Preview Event
                  </button>

                  <button
                    class="h-9 px-5 bg-primary-blue hover:bg-[#0385b5] rounded text-white font-semibold text-base flex items-center justify-center gap-2 transition-colors"
                  >
                    <svg
                      width="18"
                      height="18"
                      viewBox="0 0 18 18"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        fill-rule="evenodd"
                        clip-rule="evenodd"
                        d="M15.7526 7.5C16.1669 7.5 16.5026 7.16421 16.5026 6.75V2.25C16.5026 1.83579 16.1669 1.5 15.7526 1.5H11.2499C10.8357 1.5 10.4999 1.83578 10.4999 2.25C10.4999 2.66421 10.8357 3 11.2499 3H13.9421L7.48712 9.45495C7.19423 9.74783 7.19423 10.2227 7.48712 10.5156C7.78005 10.8086 8.25488 10.8086 8.54775 10.5156L15.0026 4.06078V6.75C15.0026 7.16421 15.3384 7.5 15.7526 7.5ZM3.75 3.75C2.50736 3.75 1.5 4.75736 1.5 6V14.25C1.5 15.4927 2.50736 16.5 3.75 16.5H12C13.2427 16.5 14.25 15.4927 14.25 14.25V9.75C14.25 9.33578 13.9142 9 13.5 9C13.0858 9 12.75 9.33578 12.75 9.75V14.25C12.75 14.6642 12.4142 15 12 15H3.75C3.33579 15 3 14.6642 3 14.25V6C3 5.58579 3.33579 5.25 3.75 5.25H8.25C8.66423 5.25 9 4.91421 9 4.5C9 4.08579 8.66423 3.75 8.25 3.75H3.75Z"
                        fill="white"
                      />
                    </svg>
                    View Event Links
                  </button>
                </div>
              </div>

              <!-- Right Column - Image Placeholder -->
              <div
                class="bg-white rounded shadow-md border border-[#E9E9E9] overflow-hidden"
              >
                <img
                  src="https://api.builder.io/api/v1/image/assets/TEMP/c7225c4b0e584884c03a8f60544338d30db7746c"
                  alt="Event Preview"
                  class="w-full h-full object-cover"
                />
              </div>
            </div>
          </div>

          <!-- Analytics Section -->
          <div class="px-4 lg:px-8 pb-8">
            <div
              class="max-w-[1366px] mx-auto bg-white rounded shadow-md border border-[#E9E9E9] py-12"
            >
              <div class="flex flex-col items-center justify-center px-8">
                <div
                  class="w-15 h-15 bg-[#DEE1EB] rounded-full flex items-center justify-center mb-6"
                >
                  <svg
                    width="26"
                    height="26"
                    viewBox="0 0 26 26"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M7.58325 14.0834V23.8334C7.58325 24.1207 7.46912 24.3962 7.26595 24.5994C7.06279 24.8026 6.78724 24.9167 6.49992 24.9167H2.16659C1.87927 24.9167 1.60372 24.8026 1.40055 24.5994C1.19739 24.3962 1.08325 24.1207 1.08325 23.8334V14.0834C1.08325 13.7961 1.19739 13.5205 1.40055 13.3173C1.60372 13.1142 1.87927 13 2.16659 13H6.49992C6.78724 13 7.06279 13.1142 7.26595 13.3173C7.46912 13.5205 7.58325 13.7961 7.58325 14.0834ZM15.1666 1.08337H10.8333C10.5459 1.08337 10.2704 1.19751 10.0672 1.40067C9.86406 1.60384 9.74992 1.87939 9.74992 2.16671V23.8334C9.74992 24.1207 9.86406 24.3962 10.0672 24.5994C10.2704 24.8026 10.5459 24.9167 10.8333 24.9167H15.1666C15.4539 24.9167 15.7295 24.8026 15.9326 24.5994C16.1358 24.3962 16.2499 24.1207 16.2499 23.8334V2.16671C16.2499 1.87939 16.1358 1.60384 15.9326 1.40067C15.7295 1.19751 15.4539 1.08337 15.1666 1.08337ZM23.8333 6.50004H19.4999C19.2126 6.50004 18.9371 6.61418 18.7339 6.81734C18.5307 7.02051 18.4166 7.29606 18.4166 7.58337V23.8334C18.4166 24.1207 18.5307 24.3962 18.7339 24.5994C18.9371 24.8026 19.2126 24.9167 19.4999 24.9167H23.8333C24.1206 24.9167 24.3961 24.8026 24.5993 24.5994C24.8025 24.3962 24.9166 24.1207 24.9166 23.8334V7.58337C24.9166 7.29606 24.8025 7.02051 24.5993 6.81734C24.3961 6.61418 24.1206 6.50004 23.8333 6.50004Z"
                      fill="#4C546C"
                    />
                  </svg>
                </div>
                <p
                  class="text-lg lg:text-[22px] text-[#686868] text-center leading-relaxed max-w-md"
                >
                  Your event analytics will appear here after you publish the
                  event.
                </p>
              </div>
            </div>
          </div>
        </div>
      </main>
    </div>
  `,
  styles: [],
})
export class EventDashboardComponent implements OnInit {
  eventName = "ENGIMACH 2023";
  eventDates = "01 Dec - 05 Dec 2023";
  activeRoute = "/event/dashboard";
  backButtonLabel = "Back to KQOL Communication";

  menuItems: MenuItem[] = [
    {
      label: "Dashboard",
      icon: DASHBOARD_ICON,
      action: () => this.navigateTo("dashboard"),
    },
    {
      label: "Event Setup",
      icon: EVENT_SETUP_ICON,
      action: () => this.navigateTo("setup"),
    },
    {
      label: "Event Overview",
      icon: EVENT_OVERVIEW_ICON,
      action: () => this.navigateTo("overview"),
    },
    {
      label: "Send Notification",
      icon: NOTIFICATION_ICON,
      action: () => this.navigateTo("notification"),
    },
    {
      label: "User Profile",
      icon: USER_PROFILE_ICON,
      action: () => this.navigateTo("profile"),
    },
    {
      label: "Event Analytics",
      icon: ANALYTICS_ICON,
      action: () => this.navigateTo("analytics"),
    },
    {
      label: "Event Theme",
      icon: THEME_ICON,
      action: () => this.navigateTo("theme"),
    },
  ];

  progressSteps: ProgressStep[] = [
    { label: "Event details", completed: true },
    { label: "Event features", completed: false },
    { label: "Features contact", completed: false },
  ];

  constructor(
    private router: Router,
    private route: ActivatedRoute,
  ) {}

  ngOnInit() {
    this.route.queryParams.subscribe((params) => {
      if (params["eventName"]) {
        this.eventName = params["eventName"];
      }
      if (params["eventDates"]) {
        this.eventDates = params["eventDates"];
      }
    });

    // Set active route based on current URL
    this.updateActiveRoute();

    // Listen for route changes
    this.router.events
      .pipe(filter((event) => event instanceof NavigationEnd))
      .subscribe(() => {
        this.updateActiveRoute();
      });
  }

  updateActiveRoute() {
    const url = this.router.url;
    if (url.includes("/dashboard")) {
      this.activeRoute = "/event/dashboard";
    } else if (url.includes("/setup")) {
      this.activeRoute = "/event/setup";
    } else if (url.includes("/overview")) {
      this.activeRoute = "/event/overview";
    } else if (url.includes("/notification")) {
      this.activeRoute = "/event/notification";
    } else if (url.includes("/profile")) {
      this.activeRoute = "/event/profile";
    } else if (url.includes("/analytics")) {
      this.activeRoute = "/event/analytics";
    } else if (url.includes("/theme")) {
      this.activeRoute = "/event/theme";
    }
  }

  navigateTo(page: string) {
    const eventId = this.route.snapshot.paramMap.get("id");
    switch (page) {
      case "dashboard":
        this.activeRoute = "/event/dashboard";
        break;
      case "setup":
        this.activeRoute = "/event/setup";
        this.router.navigate([`/event/${eventId}/setup`]);
        break;
      case "overview":
        this.activeRoute = "/event/overview";
        this.router.navigate([`/event/${eventId}/overview`]);
        break;
      case "notification":
        this.activeRoute = "/event/notification";
        break;
      case "profile":
        this.activeRoute = "/event/profile";
        break;
      case "analytics":
        this.activeRoute = "/event/analytics";
        break;
      case "theme":
        this.activeRoute = "/event/theme";
        break;
    }
  }

  onBackToDashboard() {
    this.router.navigate(["/dashboard"]);
  }

  onLogout() {
    this.router.navigate(["/"]);
  }
}
