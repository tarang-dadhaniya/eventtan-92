import { Component, Input, Output, EventEmitter } from "@angular/core";
import { CommonModule } from "@angular/common";
import { RouterLink, RouterLinkActive } from "@angular/router";

@Component({
  selector: "app-sidebar",
  standalone: true,
  imports: [CommonModule, RouterLink, RouterLinkActive],
  template: `
    <!-- Sidebar -->
    <aside
      [class.hidden]="!sidebarOpen"
      class="w-[280px] bg-[#1E1E2D] border-r border-[#717171] flex flex-col fixed lg:static h-full z-50 lg:z-auto transition-transform lg:translate-x-0"
      [class.-translate-x-full]="!sidebarOpen"
    >
      <!-- Logo -->
      <div class="px-14 py-5">
        <div class="text-primary-blue text-3xl font-bold">eventtan</div>
      </div>

      <!-- Navigation -->
      <nav class="flex-1 px-2.5 mt-8 overflow-y-auto">
        <a
          routerLink="/dashboard"
          routerLinkActive="bg-primary-blue text-white"
          [routerLinkActiveOptions]="{ exact: false }"
          class="flex items-center gap-3 h-12 px-4 rounded text-[#E8E8E8] font-medium hover:bg-[#2A2A3E] hover:text-white transition-colors"
        >
          <svg
            width="22"
            height="22"
            viewBox="0 0 22 22"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              opacity="0.4"
              d="M5.60266 0.367271C6.90622 -0.122468 8.344 -0.122386 9.64758 0.367271C10.5306 0.69908 11.3328 1.35259 12.6769 2.42782L14.9689 4.26083C15.2923 4.51956 15.3448 4.99207 15.0861 5.31551C14.8273 5.63896 14.3548 5.69146 14.0314 5.4327L11.7404 3.59872C10.3111 2.45529 9.72528 1.99899 9.12024 1.77157C8.15674 1.40968 7.09348 1.4096 6.13 1.77157C5.52496 1.99902 4.93931 2.45518 3.50989 3.59872L1.21887 5.4327C0.895426 5.69146 0.422942 5.63896 0.164185 5.31551C-0.0942824 4.99208 -0.0419678 4.5195 0.281372 4.26083L2.57336 2.42782C3.91753 1.35249 4.7196 0.69912 5.60266 0.367271Z"
              fill="white"
            />
            <path
              d="M15.748 0.281395C16.0067 -0.0415339 16.4784 -0.0939334 16.8018 0.164207L17.2598 0.531395C17.6534 0.846267 17.8915 1.03525 18.1016 1.24038C19.0679 2.18466 19.6709 3.43987 19.8047 4.78432C19.8338 5.07673 19.833 5.38047 19.833 5.88491V11.2003C19.8329 14.1458 17.4455 16.5333 14.5 16.5333C13.0735 16.5332 11.9171 15.3769 11.917 13.9503V10.2833C11.9168 9.17908 11.0213 8.28352 9.91699 8.28335C8.81272 8.28353 7.91722 9.17908 7.91699 10.2833V13.9503C7.91689 15.377 6.75968 16.5333 5.33301 16.5333C2.38786 16.533 0.000105999 14.1455 0 11.2003V5.88491C-3.47768e-07 5.38049 -0.000753955 5.07672 0.0283203 4.78432C0.162093 3.43985 0.765096 2.18468 1.73145 1.24038C1.94158 1.03507 2.17939 0.846478 2.57324 0.531395L3.03125 0.164207C3.35457 -0.0944497 3.82712 -0.0417173 4.08594 0.281395C4.34469 0.604841 4.2922 1.07733 3.96875 1.33608L3.50977 1.70229C3.09226 2.0363 2.9238 2.17242 2.7793 2.31362C2.06518 3.01154 1.61939 3.93915 1.52051 4.93276C1.50052 5.13378 1.5 5.35037 1.5 5.88491V11.2003C1.50011 13.3171 3.21628 15.033 5.33301 15.0333C5.93125 15.0333 6.41689 14.5486 6.41699 13.9503V10.2833C6.41722 8.35066 7.98429 6.78353 9.91699 6.78335C11.8497 6.78352 13.4168 8.35065 13.417 10.2833V13.9503C13.4171 14.5484 13.9019 15.0332 14.5 15.0333C16.617 15.0333 18.3329 13.3173 18.333 11.2003V5.88491C18.333 5.35034 18.3325 5.13379 18.3125 4.93276C18.2136 3.93909 17.7679 3.01154 17.0537 2.31362C16.9093 2.17251 16.7406 2.03616 16.3232 1.70229L15.8652 1.33608C15.5421 1.07726 15.4894 0.604717 15.748 0.281395Z"
              fill="white"
            />
          </svg>
          <span>Dashboard</span>
        </a>
      </nav>

      <!-- User Profile & Logout -->
      <div class="p-4 flex items-center gap-4">
        <div
          class="w-10 h-10 rounded-full bg-gray-500 flex items-center justify-center text-white font-semibold"
        >
          U
        </div>
        <button
          (click)="onLogout()"
          class="flex-1 flex items-center gap-2 h-9 px-3 rounded border border-dashed border-[#757575] bg-[#1E1E2D] text-[#A1A5B7] hover:text-white transition-colors"
        >
          <svg
            width="22"
            height="22"
            viewBox="0 0 22 22"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              opacity="0.4"
              d="M10.3027 0.219482C10.5955 -0.0732981 11.0704 -0.0730729 11.3633 0.219482L15.0303 3.88647C15.323 4.17938 15.3231 4.65418 15.0303 4.94702L11.3633 8.61304C11.0704 8.90578 10.5956 8.90588 10.3027 8.61304C10.0104 8.32015 10.0102 7.84523 10.3027 7.55249L12.6895 5.16675H0.75C0.336044 5.16657 0.000175416 4.8307 0 4.41675C1.32169e-05 4.00265 0.335944 3.66692 0.75 3.66675H12.6895L10.3027 1.28003C10.0103 0.987213 10.0103 0.512288 10.3027 0.219482Z"
              fill="currentColor"
            />
            <path
              d="M7.18359 0C8.29098 -1.33864e-07 9.16756 -0.000890797 9.87207 0.0566406C10.5851 0.114924 11.1893 0.236969 11.7402 0.517578C12.6337 0.972907 13.3601 1.70029 13.8154 2.59375C14.0962 3.14479 14.2181 3.74875 14.2764 4.46191C14.3339 5.16643 14.333 6.04294 14.333 7.15039V12.6836C14.333 13.791 14.3339 14.6676 14.2764 15.3721C14.2181 16.0852 14.0962 16.6892 13.8154 17.2402C13.3601 18.1337 12.6337 18.8601 11.7402 19.3154C11.1892 19.5962 10.5852 19.7181 9.87207 19.7764C9.16755 19.8339 8.29101 19.833 7.18359 19.833H5.79199C4.86161 19.833 4.28137 19.8373 3.78516 19.7344C1.93192 19.3497 0.48306 17.9012 0.0986328 16.0479C-0.00414176 15.5518 -6.66962e-07 14.972 0 14.042V13.583C0.000387448 13.1693 0.336206 12.8332 0.75 12.833C1.16397 12.833 1.49961 13.1691 1.5 13.583V14.042C1.5 15.0465 1.50374 15.4357 1.56738 15.7432C1.8304 17.0112 2.82191 18.0024 4.08984 18.2656C4.39737 18.3294 4.78673 18.333 5.79199 18.333H7.18359C8.31547 18.333 9.1198 18.3326 9.74902 18.2812C10.3693 18.2306 10.7542 18.1345 11.0586 17.9795C11.6701 17.6679 12.1679 17.1701 12.4795 16.5586C12.6345 16.2542 12.7306 15.8693 12.7812 15.249C12.8326 14.6198 12.833 13.8155 12.833 12.6836V7.15039C12.833 6.01817 12.8327 5.21328 12.7812 4.58398C12.7305 3.96365 12.6346 3.57881 12.4795 3.27441C12.1679 2.6631 11.67 2.166 11.0586 1.85449C10.7542 1.69951 10.3693 1.60244 9.74902 1.55176C9.11982 1.50041 8.31542 1.5 7.18359 1.5H5.79199C4.78672 1.5 4.39738 1.50359 4.08984 1.56738C2.82193 1.83052 1.83052 2.82193 1.56738 4.08984C1.50359 4.39738 1.5 4.78672 1.5 5.79199V6.25C1.5 6.66397 1.16397 7 0.75 7C0.336035 7 0 6.66397 0 6.25V5.79199C0 4.68457 0.000879883 3.80804 0.0566406 3.10352C0.114924 2.39014 0.236969 1.78625 0.517578 1.23535C0.972656 0.341797 1.70020 -0.385254 2.59375 -0.840332C3.14453 -1.12109 3.74844 -1.24316 4.46191 -1.30176C5.16699 -1.35938 6.04248 -1.35938 7.15039 -1.35938H12.6836C13.791 -1.35938 14.6675 -1.35938 15.3721 -1.30176C16.0852 -1.24316 16.6892 -1.12109 17.2402 -0.840332C18.1338 -0.385254 18.8603 0.341797 19.3154 1.23535C19.5962 1.78625 19.7183 2.39014 19.7764 3.10352C19.8339 3.80804 19.833 4.68457 19.833 5.79199V12.6836C19.833 13.791 19.8339 14.6675 19.7764 15.3721C19.7183 16.0852 19.5962 16.6892 19.3154 17.2402C18.8603 18.1338 18.1338 18.8603 17.2402 19.3154C16.6892 19.5962 16.0852 19.7183 15.3721 19.7764C14.6675 19.8339 13.791 19.833 12.6836 19.833H7.15039C6.04248 19.833 5.16699 19.8339 4.46191 19.7764C3.74844 19.7183 3.14453 19.5962 2.59375 19.3154C1.70020 18.8603 0.972656 18.1338 0.517578 17.2402C0.236969 16.6892 0.114924 16.0852 0.0566406 15.3721C0.000879883 14.6675 0 13.791 0 12.6836V12.251C0 11.8372 0.336035 11.5 0.75 11.5C1.16397 11.5 1.5 11.8372 1.5 12.251V12.6836C1.5 13.8155 1.50359 14.6198 1.56738 15.2402C1.62549 15.8403 1.69922 16.2256 1.85449 16.5298C2.16602 17.1411 2.66406 17.6391 3.2754 17.9507C3.57959 18.1057 3.96465 18.1794 4.56445 18.2375C5.16797 18.2891 5.97266 18.2927 7.10547 18.2927H12.5381C13.6709 18.2927 14.4756 18.2891 15.0791 18.2375C15.6787 18.1794 16.0636 18.1057 16.368 17.9507C16.9794 17.6391 17.4775 17.1411 17.789 16.5298C17.9443 16.2256 18.018 15.8403 18.0761 15.2402C18.1381 14.6198 18.1416 13.8155 18.1416 12.6836V7.15039C18.1416 5.97217 18.1381 5.16748 18.0761 4.54712C18.018 3.94727 17.9443 3.56226 17.789 3.2583C17.4775 2.6470 16.9794 2.14896 16.368 1.83740C16.0636 1.68213 15.6787 1.60840 15.0791 1.55029C14.4756 1.49854 13.6709 1.49512 12.5381 1.49512H7.10547C5.97266 1.49512 5.16797 1.49854 4.56445 1.55029C3.96465 1.60840 3.57959 1.68213 3.2754 1.83740C2.66406 2.14896 2.16602 2.6470 1.85449 3.2583C1.69922 3.56226 1.62549 3.94727 1.56738 4.54712C1.50359 5.16748 1.5 5.97217 1.5 7.15039V7.58301C1.5 7.99697 1.16397 8.33301 0.75 8.33301C0.336035 8.33301 0 7.99697 0 7.58301Z"
              fill="currentColor"
            />
          </svg>
          <span class="text-sm">Logout</span>
        </button>
      </div>
    </aside>

    <!-- Overlay for mobile -->
    <div
      *ngIf="sidebarOpen"
      (click)="closeSidebar()"
      class="fixed inset-0 bg-black bg-opacity-50 lg:hidden z-40"
    ></div>
  `,
  styles: [],
})
export class SidebarComponent {
  @Input() sidebarOpen = false;
  @Output() toggleSidebarEvent = new EventEmitter<void>();
  @Output() logoutEvent = new EventEmitter<void>();

  closeSidebar() {
    this.toggleSidebarEvent.emit();
  }

  onLogout() {
    this.logoutEvent.emit();
  }
}
